addEventListener("message",({data:s})=>{if(!s||s.type!=="COMPUTE_PRESSURE"){postMessage({score:0,details:{error:"Invalid message type"}});return}let e=s.pressureSamples;if(!e||e.length<2){postMessage({score:1,details:{sampleCount:e?.length??0}});return}let t=i(e);postMessage(t)});function i(s){let e=s.length,t=s.reduce((r,n)=>r+n,0)/e,c=s.reduce((r,n)=>r+Math.pow(n-t,2),0)/e,o=Math.sqrt(c),a=.15;return{score:Math.max(0,Math.min(1,1-o/a)),details:{n:e,mean:+t.toFixed(4),sigma:+o.toFixed(4),target:a}}}
